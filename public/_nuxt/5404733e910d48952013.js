(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{1075:function(t,e,r){"use strict";r.r(e);r(27),r(35),r(39),r(15);var o={name:"EditOrder",components:{StockInForm:r(686).a},created:function(){this.fetchData(),this.fetchOutlet(),this.fetchLocation(),this.setData()},data:function(){return{form:{items:[]},outlets:[],products:[],orders:[],order_status:["New","Accepted","Pending","Received","Cancel"],payment_status:["Paid","Due"],locations:[]}},computed:{calculateQty:function(){return this.form.items.reduce((function(t,e){return t+Number(e.quantity)}),0)},calculateTotal:function(){return this.form.items.reduce((function(t,e){return t+(e.unit_price-e.unit_price*e.discount/100)*e.quantity}),0)}},methods:{discountedPrice:function(t){return(t.unit_price-t.unit_price*t.discount/100)*t.quantity},fetchData:function(){var t=this;this.$axios.$get("/api/product").then((function(e){t.$set(t.$data,"products",e.products.data)})).catch((function(t){console.log(t)}))},fetchOutlet:function(){var t=this;this.$axios.$get("/api/outlets").then((function(e){t.$set(t.$data,"outlets",e.outlets.data),console.log(e.outlets.data)})).catch((function(t){console.log(t)}))},fetchLocation:function(){var t=this;this.$axios.$get("api/location").then((function(e){t.locations=e.locations.data})).catch((function(t){console.log(t.response)}))},addTocart:function(t){this.form.items.includes(t)?alert("already there"):this.form.items.push(t),Vue.set(t,"quantity",1),Vue.set(t,"discount",0)},removeItem:function(t){this.form.items.splice(t,1)},setData:function(){var t=this;this.$axios.$get("api/order/"+this.$route.params.id).then((function(e){t.form=e[1],t.$set(t.$data,"form",e[1]),console.log(e[1])})).catch((function(t){console.log(res.response)}))},updateItem:function(){var t=this;this.$axios.$patch("api/order/"+this.form.id,{name:this.form.name,location:this.form.location,phone:this.form.phone,create_by:this.form.create_by,status:this.form.status}).then((function(e){t.items=e.data,t.$toast.info("Succeessfully updated"),t.$router.push("/order/order-list")})).catch((function(e){t.$refs.form.validate(e.response.data.errors)}))}}},n=(r(915),r(31)),c=r(102),l=r.n(c),d=r(380),m=r(167),f=r(147),v=r(66),_=r(372),h=r(143),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{staticClass:"pa-5"},[r("v-card",{staticClass:"card"},[r("v-card-title",{staticClass:"blue-grey lighten-4"},[t._v("Edit Stock In")]),t._v(" "),r("v-divider"),t._v(" "),r("StockInForm",{attrs:{form:t.form}}),t._v(" "),r("v-btn",{staticClass:"blue mx-5 darken-2 mb-5 grey--text text--lighten-4",on:{click:function(e){return e.preventDefault(),t.createOrder(e)}}},[r("v-icon",[t._v("mdi-check")]),t._v("Submit\n\t\t")],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;l()(component,{VApp:d.a,VBtn:m.a,VCard:f.a,VCardTitle:v.c,VDivider:_.a,VIcon:h.a})},562:function(t,e,r){var content=r(623);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(12).default)("340b2643",content,!0,{sourceMap:!1})},622:function(t,e,r){"use strict";var o=r(562);r.n(o).a},623:function(t,e,r){(t.exports=r(11)(!1)).push([t.i,".textarea{border:1px solid rgba(0,0,0,.125);outline:1px solid #461577}.tableOrder{width:100%;margin-top:10px;border-collapse:collapse}.tableOrder--header{font-weight:500;text-align:left}.tableOrder--header,.tableOrder--td{border-bottom:1px solid rgba(0,0,0,.125)}.table-quantity{border:1px solid rgba(0,0,0,.125);padding:5px 10px;margin-top:5px;margin-bottom:5px}",""])},677:function(t,e,r){var content=r(916);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(12).default)("7b12a4cf",content,!0,{sourceMap:!1})},686:function(t,e,r){"use strict";var o={props:{form:{type:Object,default:function(){return{items:[]}}}},data:function(){return{products:[],suppliers:[],payment_status:["Paid","Due"],locations:[]}},computed:{calculateQty:function(){return this.form.items.reduce((function(t,e){return t+e.quantity}),0)}},watch:{"form.items":{handler:function(){for(var t=0,e=this.form.items,i=0;i<e.length;i++)this.form.items[i].subtotal=e[i].quantity*e[i].unit_price,t+=this.form.items[i].subtotal;this.form.items=e,this.form.total=t},immediate:!0,deep:!0}},methods:{fetchProduct:function(){var t=this;this.$axios.$get("/api/product").then((function(e){t.products=e.products.data})).catch((function(t){console.log(t)}))},fetchSupplier:function(){var t=this;this.$axios.$get("api/supplier").then((function(e){t.suppliers=e.suppliers.data})).catch((function(t){console.log(t.response)}))},addTocart:function(t){for(var e=this.form.items,i=0;i<e.length;i++)if(e[i].product_id==t.id)return void(this.form.items[i].quantity+=1);this.form.items.push({product:t,product_id:t.id,quantity:1,unit_price:t.price})},removeItem:function(t){this.form.items.splice(t,1)}},created:function(){this.fetchProduct(),this.fetchSupplier()}},n=(r(622),r(31)),c=r(102),l=r.n(c),d=r(538),m=r(167),f=r(393),v=r(143),_=r(396),h=r(369),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),r("div",{staticClass:"px-5"},[r("v-row",[r("v-col",{attrs:{sm:"6",cols:"12"}},[r("label",{staticClass:"font-weight-bold",attrs:{for:"qty"}},[t._v("\n\t\t\t\t\tReference No.\n\t\t\t\t\t"),r("span",{staticClass:"red--text"},[t._v("*")])]),t._v(" "),r("validation-provider",{attrs:{name:"Reference No.",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("v-text-field",{attrs:{outlined:"",solo:"",dense:"",label:"Reference No."},model:{value:t.form.reference_no,callback:function(e){t.$set(t.form,"reference_no",e)},expression:"form.reference_no"}}),t._v(" "),r("span",{staticClass:"red--text"},[t._v(t._s(o[0]))])]}}])})],1),t._v(" "),r("v-col",{attrs:{sm:"6",cols:"12"}},[r("label",{staticClass:"font-weight-bold",attrs:{for:"supplier"}},[t._v("\n\t\t\t\t\tSupplier\n\t\t\t\t\t"),r("span",{staticClass:"red--text"},[t._v("*")])]),t._v(" "),r("validation-provider",{attrs:{name:"Supplier",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[r("v-autocomplete",{attrs:{items:t.suppliers,"item-text":"name","item-value":"id",outlined:"",solo:"",dense:"",label:"Supplier Name"},model:{value:t.form.supplier_id,callback:function(e){t.$set(t.form,"supplier_id",e)},expression:"form.supplier_id"}}),t._v(" "),r("span",{staticClass:"red--text"},[t._v(t._s(o[0]))])]}}])})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("label",{staticClass:"font-weight-bold"},[t._v("\n\t\t\t\t\tSelect Product\n\t\t\t\t\t"),r("span",{staticClass:"red--text"},[t._v("*")])]),t._v(" "),r("div",[r("v-autocomplete",{attrs:{items:t.products,solo:"",outlined:"",dense:"","item-text":"name","item-value":"id","return-object":"",label:"Select Product"},on:{input:t.addTocart}})],1)])],1),t._v(" "),r("div",[r("label",{staticClass:"font-weight-bold mb-3"},[t._v("Order Table")]),t._v(" "),r("table",{staticClass:"tableOrder"},[t._m(1),t._v(" "),r("tbody",[t._l(t.form.items,(function(e,o){return r("tr",{key:o,staticClass:"tableOrder--td"},[r("td",[t._v(t._s(e.product?e.product.name:null))]),t._v(" "),r("td",[t._v(t._s(e.product?e.product.code:null))]),t._v(" "),r("td",[r("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.items[o].quantity,expression:"form.items[index].quantity",modifiers:{number:!0}}],staticClass:"table-quantity",attrs:{type:"number",name:"form.items[index].quantity"},domProps:{value:t.form.items[o].quantity},on:{input:function(e){e.target.composing||t.$set(t.form.items[o],"quantity",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),r("span",[t._v(t._s(n[0]))])]}}],null,!0)})],1),t._v(" "),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.items[o].unit_price,expression:"form.items[index].unit_price",modifiers:{number:!0}}],staticClass:"table-quantity",attrs:{type:"number",name:"form.items[index].unit_price",placeholder:"0.00"},domProps:{value:t.form.items[o].unit_price},on:{input:function(e){e.target.composing||t.$set(t.form.items[o],"unit_price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),r("td",[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.items[o].discount,expression:"form.items[index].discount",modifiers:{number:!0}}],staticClass:"table-quantity",attrs:{type:"number",name:"form.items[index].discount",placeholder:"0.00"},domProps:{value:t.form.items[o].discount},on:{input:function(e){e.target.composing||t.$set(t.form.items[o],"discount",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),r("td",[t._v(t._s(t.form.items[o].subtotal))]),t._v(" "),r("td",[r("v-btn",{attrs:{small:"",color:"red",outlined:""},on:{click:function(e){return t.removeItem(o)}}},[r("v-icon",[t._v("mdi-delete")])],1)],1)])})),t._v(" "),r("tr",[r("td",{staticClass:"py-3",attrs:{colspan:"2"}},[t._v("Total")]),t._v(" "),r("td",{attrs:{colspan:"3"}},[t._v(t._s(t.calculateQty))]),t._v(" "),r("td",[t._v(t._s(t.form.total))])])],2)])]),t._v(" "),r("div",{staticClass:"d-flex flex-column mb-5"},[r("label",{attrs:{for:""}},[t._v("Note")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"textarea",attrs:{cols:"30",rows:"7"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})])],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"px-5 pt-3 font-italic grey--text"},[this._v("\n\t\tThe field labels marked with\n\t\t"),e("span",{staticClass:"red--text"},[this._v("*")]),this._v(" are required input fields.\n\t")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",{staticClass:"tableOrder--header"},[r("td",[t._v("Name")]),t._v(" "),r("td",[t._v("Code")]),t._v(" "),r("td",[t._v("Quantity")]),t._v(" "),r("td",[t._v("Unit Price")]),t._v(" "),r("td",[t._v("Discount")]),t._v(" "),r("td",[t._v("Total")]),t._v(" "),r("td",[t._v("Actions")])])])}],!1,null,null,null);e.a=component.exports;l()(component,{VAutocomplete:d.a,VBtn:m.a,VCol:f.a,VIcon:v.a,VRow:_.a,VTextField:h.a})},915:function(t,e,r){"use strict";var o=r(677);r.n(o).a},916:function(t,e,r){(t.exports=r(11)(!1)).push([t.i,".textarea{border:1px solid rgba(0,0,0,.125);outline:1px solid #461577}.tableOrder{width:100%;margin-top:10px;border-collapse:collapse}.tableOrder--header{font-weight:500;text-align:left}.tableOrder--header,.tableOrder--td{border-bottom:1px solid rgba(0,0,0,.125)}.table-quantity{border:1px solid rgba(0,0,0,.125);padding:5px 10px;margin-top:5px;margin-bottom:5px}",""])}}]);