(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{1012:function(t,e,o){"use strict";o.r(e);o(35),o(39);var n=o(2),r=o(529);n.default.filter("formatMoney",(function(t){return r(t).format("0,0.00")}));var l={name:"AddSale",created:function(){this.fetchProduct(),this.fetchMember(),this.fetchLocation()},data:function(){return{form:{items:[],paid:0,discount:0,shipping_cost:0},payment_status:["Paid","Due"],payment_method:["Cash","Cheque"],sale_status:["Completed","Pending"],members:[],locations:[],products:[],sales:[]}},computed:{calculateTotal:function(){return this.form.items.reduce((function(t,e){return t+e.quantity}),0)},Total:function(){return this.form.items.reduce((function(t,e){return t+e.unit_price*e.quantity}),0)},grandTotal:function(){var t=this;return this.form.items.reduce((function(e,o){return e+(o.unit_price-o.unit_price*t.form.discount/100)*o.quantity}),0)}},methods:{fetchLocation:function(){var t=this;this.$axios.$get("api/location").then((function(e){t.locations=e.locations.data,console.log(e)})).catch((function(t){console.log(t.response)}))},fetchMember:function(){var t=this;this.$axios.$get("api/member").then((function(e){t.members=e.members.data,console.log(e)})).catch((function(t){console.log(t.response)}))},fetchProduct:function(){var t=this;this.$axios.$get("api/product").then((function(e){t.$set(t.$data,"products",e.products.data),console.log(e)})).catch((function(t){console.log(t.response)}))},createSale:function(){var t=this;this.$axios.$post("api/sale",this.form).then((function(e){t.sales=e.data,console.log(e),t.$router.push("/sale/sale-list")})).catch((function(e){console.log(e.response),t.$refs.form.validate(e.response.data.errors)}))},addTocart:function(t){this.form.items.includes(t)?(n.default.set(t,"quantity",t.quantity+=1),console.log(t)):(this.form.items.push(t),n.default.set(t,"unit_price",t.price),n.default.set(t,"quantity",1),n.default.set(t,"discount",0))},removeItem:function(t){this.form.items.splice(t,1)},discountedPrice:function(t){return t.unit_price*t.quantity}}},c=(o(797),o(31)),d=o(102),m=o.n(d),v=o(538),f=o(167),_=o(147),h=o(66),x=o(393),C=o(541),y=o(372),T=o(143),w=o(396),$=o(537),S=o(369),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("ValidationObserver",{ref:"form"},[o("v-card",[o("div",{staticClass:"indigo lighten-1 white--text"},[o("v-card-title",[t._v("Add Sale")])],1),t._v(" "),o("v-divider"),t._v(" "),o("div",{staticClass:"px-5"},[o("p",{staticClass:"caption font-italic pt-5"},[t._v("The field labels marked with * are required input fields.")]),t._v(" "),o("v-row",[o("v-col",{attrs:{md:"4",cols:"12"}},[o("label",{staticClass:"font-weight-bold"},[t._v("Customer*")]),t._v(" "),o("validation-provider",{attrs:{rules:"required",name:"Customer"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[o("v-autocomplete",{attrs:{solo:"",outlined:"",dense:"",label:"Select Customer",items:t.members,"item-value":"name","item-text":"name","return-object":""},model:{value:t.form.member,callback:function(e){t.$set(t.form,"member",e)},expression:"form.member"}}),t._v(" "),o("span",{staticClass:"red--text"},[t._v(t._s(n[0]))])]}}])})],1),t._v(" "),o("v-col",{attrs:{md:"4",cols:"12"}},[o("label",{staticClass:"font-weight-bold"},[t._v("Warehouse*")]),t._v(" "),o("validation-provider",{attrs:{rules:"required",name:"Location"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[o("v-autocomplete",{attrs:{solo:"",outlined:"",dense:"",label:"Select Warehouse",items:t.locations,"item-value":"name","item-text":"name","return-object":""},model:{value:t.form.location,callback:function(e){t.$set(t.form,"location",e)},expression:"form.location"}}),t._v(" "),o("span",{staticClass:"red--text"},[t._v(t._s(n[0]))])]}}])})],1),t._v(" "),o("v-col",{attrs:{md:"4",cols:"12"}},[o("label",{staticClass:"font-weight-bold"},[t._v("Payment Method*")]),t._v(" "),o("validation-provider",{attrs:{rules:"required",name:"Payment Method"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[o("v-select",{attrs:{solo:"",outlined:"",dense:"",items:t.payment_method,label:"Please Select"},model:{value:t.form.payment_method,callback:function(e){t.$set(t.form,"payment_method",e)},expression:"form.payment_method"}}),t._v(" "),o("span",{staticClass:"red--text"},[t._v(t._s(n[0]))])]}}])})],1),t._v(" "),o("v-col",{attrs:{md:"12",cols:"12"}},[o("label",{staticClass:"font-weight-bold"},[t._v("Select Product")]),t._v(" "),o("v-autocomplete",{attrs:{solo:"",outlined:"",dense:"","append-icon":"mdi-barcode",items:t.products,"item-value":"name","item-text":"name","return-object":""},on:{input:t.addTocart}})],1)],1),t._v(" "),o("div",[o("table",{staticClass:"saleTable"},[o("thead",[o("tr",[o("th",{staticClass:"saleTable--th"},[t._v("Name")]),t._v(" "),o("th",{staticClass:"saleTable--th"},[t._v("Code")]),t._v(" "),o("th",{staticClass:"saleTable--th"},[t._v("Quantity")]),t._v(" "),o("th",{staticClass:"saleTable--th"},[t._v("Product Price")]),t._v(" "),o("th",{staticClass:"saleTable--th"},[t._v("Total")]),t._v(" "),o("th",{staticClass:"saleTable--th"},[t._v("Action")])])]),t._v(" "),o("tbody",[t._l(t.form.items,(function(e,n){return o("tr",{key:n,staticClass:"saleTable--td"},[o("td",[t._v(t._s(e.name))]),t._v(" "),o("td",[t._v(t._s(e.code))]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.items[n].quantity,expression:"form.items[index].quantity",modifiers:{number:!0}}],staticClass:"saleTable--input",attrs:{type:"number"},domProps:{value:t.form.items[n].quantity},on:{input:function(e){e.target.composing||t.$set(t.form.items[n],"quantity",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),o("td",[o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.items[n].unit_price,expression:"form.items[index].unit_price",modifiers:{number:!0}}],staticClass:"saleTable--input",attrs:{type:"number",placeholder:"0.00"},domProps:{value:t.form.items[n].unit_price},on:{input:function(e){e.target.composing||t.$set(t.form.items[n],"unit_price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),o("td",[t._v("USD "+t._s(t._f("formatMoney")(t.discountedPrice(e))))]),t._v(" "),o("td",[o("v-btn",{attrs:{small:"",color:"red",outlined:""},on:{click:function(e){return t.removeItem(n)}}},[o("v-icon",[t._v("mdi-delete")])],1)],1)])})),t._v(" "),o("tr",{staticClass:"saleTable--total"},[o("th",{attrs:{colspan:"2"}},[t._v("Total")]),t._v(" "),o("td",{attrs:{colspan:"2"}},[t._v(t._s(t.calculateTotal))]),t._v(" "),o("td",[t._v("USD "+t._s(t._f("formatMoney")(t.Total)))])])],2)])]),t._v(" "),o("v-row",{staticClass:"pt-5"},[o("v-col",{attrs:{md:"4",cols:"12"}},[o("label",{staticClass:"font-weight-bold",attrs:{for:""}},[t._v("Shipping Cost")]),t._v(" "),o("v-text-field",{attrs:{solo:"",outlined:"",dense:"",type:"number",placeholder:"0.0"},model:{value:t.form.shipping_cost,callback:function(e){t.$set(t.form,"shipping_cost",t._n(e))},expression:"form.shipping_cost"}})],1),t._v(" "),o("v-col",{attrs:{md:"4",cols:"12"}},[o("label",{staticClass:"font-weight-bold",attrs:{for:""}},[t._v("Paid")]),t._v(" "),o("validation-provider",{attrs:{name:"Paid",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.errors;return[o("v-text-field",{staticClass:"ma-0 pa-0",attrs:{solo:"",outlined:"",dense:"",type:"number",placeholder:"0.0"},model:{value:t.form.paid,callback:function(e){t.$set(t.form,"paid",e)},expression:"form.paid"}}),t._v(" "),o("span",{staticClass:"red--text"},[t._v(t._s(n[0]))])]}}])})],1),t._v(" "),o("v-col",{attrs:{md:"4",cols:"12"}},[o("label",{staticClass:"font-weight-bold",attrs:{for:"discount"}},[t._v("Discount Percent")]),t._v(" "),o("v-text-field",{attrs:{solo:"",outlined:"",dense:""},model:{value:t.form.discount,callback:function(e){t.$set(t.form,"discount",e)},expression:"form.discount"}})],1)],1),t._v(" "),o("div",{staticClass:"d-flex justify-space-between grandTotal + form.discount px-5 py-2"},[o("div",{staticClass:"granTotal--border"},[o("span",{staticClass:"font-weight-medium"},[t._v("Item:")]),t._v(" "),o("span",[t._v(t._s(t.calculateTotal))])]),t._v(" "),o("div",[o("span",{staticClass:"font-weight-medium"},[t._v("Total:")]),t._v(" "),o("span",[t._v("USD "+t._s(t.Total))])]),t._v(" "),o("div",[o("span",{staticClass:"font-weight-medium"},[t._v("Grand Total:")]),t._v(" "),o("span",[t._v("USD "+t._s(t.grandTotal+t.form.shipping_cost))])])]),t._v(" "),o("div",{staticClass:"d-flex flex-column"},[o("label",{attrs:{for:"note"}},[t._v("Note")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"sale--textarea",attrs:{cols:"30",rows:"5"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})])],1),t._v(" "),o("v-btn",{directives:[{name:"permission",rawName:"v-permission",value:"add sales",expression:"'add sales'"}],staticClass:"blue mx-5 lighten-2 my-5",on:{click:t.createSale}},[o("v-icon",[t._v("mdi-check")]),t._v("Submit\n\t\t\t")],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{VAutocomplete:v.a,VBtn:f.a,VCard:_.a,VCardTitle:h.c,VCol:x.a,VContainer:C.a,VDivider:y.a,VIcon:T.a,VRow:w.a,VSelect:$.a,VTextField:S.a})},613:function(t,e,o){var content=o(798);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("e631caae",content,!0,{sourceMap:!1})},797:function(t,e,o){"use strict";var n=o(613);o.n(n).a},798:function(t,e,o){(t.exports=o(11)(!1)).push([t.i,".sale--textarea{border:1px solid #349feb;outline:none}.saleTable{border-collapse:collapse;width:100%}.saleTable--th{border-bottom:1px solid rgba(0,0,0,.125);text-align:left;padding-bottom:2px}.saleTable--input{border:1px solid rgba(0,0,0,.125);padding:5px;margin:10px auto;outline:none}.saleTable--total{font-weight:400;text-align:left;padding-top:10px}.saleTable--td{border-bottom:1px solid rgba(0,0,0,.125)}.grandTotal{border:1px solid rgba(27,3,3,.125)}.grandTotal--border{border-right:1px solid rgba(27,3,3,.125)}",""])}}]);